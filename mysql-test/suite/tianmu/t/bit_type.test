--source include/have_tianmu.inc

drop table if exists bittypes, t;
CREATE TABLE t (b BIT(8));
# insert values using literals: https://dev.mysql.com/doc/refman/8.0/en/bit-value-literals.html
INSERT INTO t SET b = b'11111111';
INSERT INTO t SET b = B'1010';
INSERT INTO t SET b = 0b0101;
INSERT INTO t values(b'1'), (B'1010'), (0b0101);
SELECT b+0, BIN(b), OCT(b), HEX(b) FROM t;

# data too long
--error 1406
INSERT INTO t values(b'111111111');

# wrong SQL syntax
--error 1064
insert into t values(b'2');

--error 1054
insert into t values(0B111);

# insert values with string mode
drop table t;
CREATE TABLE t (b BIT(8));
insert into t values('');
insert into t values(' ');
insert into t values('1');
insert into t values('2');
insert into t values('9');
SELECT b+0, BIN(b), OCT(b), HEX(b) FROM t;

# ERROR 1406 (22001): Data too long for column 'b' at row 1
--error 1406
insert into t values('10');
--error 1406
insert into t values('  ');
--error 1406
insert into t values("22");
drop table t;

# test default M=1
CREATE TABLE t (b BIT);
insert into t values(b'0');
insert into t values(b'1');
insert into t values(b'');
SELECT b+0, BIN(b), OCT(b), HEX(b) FROM t;

# space will be parsed as num 32, so data too long error is returned
--error 1406
insert into t values(' ');
drop table t;
